#  _explorer_joy_control_

手柄数据处理包，最后更新于2019年

换新手柄：jstest /dev/input/jsX显示,再在解释器中写归一化。js0/js1使用ls /dev/input查看

比赛时备好备用手柄(可用xbox与赛太克)


## 车    

### R1+ 
操作 | 对应 | 操作 | 对应
---|--- |--- |---
左摇杆左右 | 车左右旋转    |左摇杆上下 | 车前进后退
上下按键   | 左前副履带前后|1 3        | 右前副履带前后
左右按键   | 左后副履带前后 |2 4        | 右后副履带前后
右摇杆按钮 | 副履带复位重启底盘 |+R2 +1 2 3 | 速度档位切换 

### R2+ 
操作 | 对应 | 操作 | 对应
---|--- |--- |---
左摇杆左右 | 车前摄像头左右 |左摇杆上下 | 车前摄像头上下 
右摇杆左右   | 车后摄像头左右 |右摇杆上下        | 车后摄像头左右 
左摇杆按钮 | 车前摄像头重置 |右摇杆按钮 | 车后摄像头重置 

## 机械臂

### L1+ 
操作 | 对应 | 操作 | 对应
---|--- |--- |---
右摇杆左右  |控制爪子旋转 | 右摇杆上下 |控制摄像头上下
2 4按键    | **爪子开合** |1 3按键   | 爪子0到π的旋转(快速) 
左摇杆左右 | **控制摄像头旋转** |左摇杆上下 | **中间关节** 
上下按键   | **底部上下** |左右按键|**底部旋转**
右摇杆按钮 | 机械臂整体复位 |左摇杆按钮|相机视角复位
+R1 +左摇杆按钮 | 机械臂扭头复位 ||

## 机械臂解算(TODO)
### L1+L2
| 操作       | 对应           | 操作       | 对应           |
| ---------- | -------------- | ---------- | -------------- |
| 右摇杆左右 | 控制爪子旋转   | 右摇杆上下 | 控制摄像头上下 |
| 2 4按键    | 控制摄像头旋转 | 1 3按键    | 爪子0到π的旋转 |
| 左摇杆左右 | 底部旋转       | 左摇杆上下 | 末端执行器前后 |
| 上下按键   | 末端执行器上下 |            |                |

程序为了降低在更换手柄时需要的代码更改,增加了 _joy_explainer_ 的部分,得到的数据将先有 _joy_explainer_ 处理之后在使用,提高代码可读性

代码由 _joy_node_ 的获取和循环调用的发送构成

**注意**

1. 保存的发送数据归零的时机(MessageClean函数)

2. 许多数据(尤其是速度控制命令)需要最后发送一个0值数据,注意处理

3. 注意在一个模式跳换到另一个模式时那些数据需要清零

4. 数据发送的频率30hz

5. xbox手柄有时在不按的时候默认值不是0而是0.0007，这个注意一下
   北通手柄在树莓派和pc上的按键代号定义不一样，注意
   赛泰克手炳可能使用SaiTaiKe类有可能使用shoubing类

   注意launch文件中有deadzone参数

reference:<http://wiki.ros.org/joy/Tutorials/WritingTeleopNode>